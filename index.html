<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gypsy Show — Цыганский ансамбль</title>
  <meta name="description" content="Цыганские песни и танцы. Живой звук. Яркое шоу на любой праздник. Бронирование дат — gypsy-show.ru">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <!-- Canonical / Icons -->
  <link rel="canonical" href="https://www.gypsy-show.ru/">
  <link rel="icon" href="img/favicon.png" sizes="32x32" type="image/png">
  <link rel="apple-touch-icon" href="img/apple-touch-icon.png" sizes="180x180">
  <meta name="theme-color" content="#100612">

  <!-- Open Graph -->
  <meta property="og:title" content="Цыганский ансамбль — Gypsy Show">
  <meta property="og:description" content="Цыганские песни и танцы. Концерты, корпоративы, свадьбы.">
  <meta property="og:image" content="https://www.gypsy-show.ru/img/cover.jpg">
  <meta property="og:url" content="https://www.gypsy-show.ru/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Gypsy Show">
  <meta property="og:locale" content="ru_RU">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Цыганский ансамбль — Gypsy Show">
  <meta name="twitter:description" content="Цыганские песни и танцы. Концерты, корпоративы, свадьбы.">
  <meta name="twitter:image" content="https://www.gypsy-show.ru/img/cover.jpg">

  <style>
    :root{
      --header-h: 76px;
      --bg:#0c0611; --bg2:#13081a;
      --text:#fff4fb; --muted:#d9cfe1;
      --gold:#ffb703; --rose:#ff3d6a; --violet:#7a4dff; --cyan:#2bf5ff; --amber:#ff7b00;
      --glass: rgba(255,255,255,.06); --border: rgba(255,255,255,.18);
      --radius:18px; --shadow: 0 12px 40px rgba(0,0,0,.45);
      --mx:50%; --my:50%;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; color:var(--text);
      font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.7; font-size:17.5px;
      background:
        radial-gradient(1200px 700px at 0% 0%, #2d0e41 0%, transparent 60%),
        radial-gradient(900px 600px at 100% 0%, #3c0e2c 0%, transparent 60%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      overflow-x:hidden;
    }

    /* Scroll progress */
    .progress{position:fixed; top:0; left:0; height:3px; width:0%; background: linear-gradient(90deg, var(--rose), var(--gold), var(--violet)); z-index:1000; box-shadow:0 0 12px rgba(255,255,255,.4)}

    /* Luxe cursor */
    .cursor-dot,.cursor-ring{
      position:fixed; left:0; top:0; pointer-events:none; z-index:999; transform:translate(-50%,-50%);
      transition:opacity .3s ease;
    }
    .cursor-dot{width:6px;height:6px;border-radius:50%; background:radial-gradient(circle, #fff 0, #fff6 60%, transparent 70%);}
    .cursor-ring{width:44px;height:44px;border-radius:50%;
      background: radial-gradient(50% 50% at 50% 50%, rgba(255,255,255,.15), rgba(255,255,255,0) 60%),
                  conic-gradient(from 0deg, rgba(255,61,106,.5), rgba(255,183,3,.35), rgba(123,77,255,.45), rgba(43,245,255,.35), rgba(255,61,106,.5));
      filter: blur(.2px); mix-blend-mode: screen; opacity:.85;
    }
    .cursor-hide .cursor-dot,.cursor-hide .cursor-ring{opacity:0}

    /* Ambient aura following mouse */
    .aura{
      position:fixed; inset:0; pointer-events:none; z-index:-1;
      background:
        radial-gradient(650px 650px at var(--mx) var(--my), rgba(255,61,106,.10), rgba(255,183,3,.08) 35%, transparent 60%),
        radial-gradient(520px 520px at calc(100% - var(--mx)) calc(100% - var(--my)), rgba(122,77,255,.10), rgba(43,245,255,.08) 35%, transparent 60%);
      transition: background 120ms ease-out;
    }

    /* Header */
    .header{
      position:sticky; top:0; z-index:50; height:var(--header-h);
      backdrop-filter: blur(10px);
      background: linear-gradient(90deg, rgba(12,6,17,.8), rgba(15,7,26,.55));
      border-bottom:1px solid var(--border);
    }
    .container{width:min(1200px, 92%); margin-inline:auto}
    .header__wrap{display:flex; align-items:center; justify-content:space-between; gap:20px; height:var(--header-h)}
    .logo{
      font: 700 30px "Playfair Display", serif; letter-spacing:.5px;
      background: linear-gradient(120deg, #fff 20%, var(--gold) 45%, #fff 65%, var(--rose) 85%);
      -webkit-background-clip:text; background-clip:text; color:transparent; animation:sheen 6s linear infinite;
    }
    @keyframes sheen{0%{background-position:0%}100%{background-position:200%}}
    .nav{display:flex; gap:18px; align-items:center}
    .nav a{
      color:var(--muted); text-decoration:none; font-weight:600; padding:10px 12px; border-radius:12px; position:relative;
      transition: color .2s, transform .2s;
    }
    .nav a::after{
      content:""; position:absolute; left:12px; right:12px; bottom:6px; height:2px; border-radius:2px;
      background: linear-gradient(90deg, var(--rose), var(--gold), var(--violet)); transform:scaleX(0); transform-origin:left;
      transition: transform .25s;
    }
    .nav a:hover{color:#fff; transform:translateY(-1px)}
    .nav a:hover::after{transform:scaleX(1)}
    .burger{display:none; font-size:26px; border:none; background:transparent; color:#fff}

    /* Buttons */
    .btn{
      --padX:24px;
      position:relative; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; user-select:none;
      padding:13px var(--padX); border-radius:999px; border:1px solid transparent; text-decoration:none; font-weight:700; letter-spacing:.2px;
      transition: transform .12s ease, filter .25s ease, box-shadow .25s ease;
      box-shadow: 0 10px 26px rgba(255, 61, 106, .28);
      overflow:hidden; isolation:isolate; font-size:17px;
    }
    .btn--primary{
      color:#120510; background: linear-gradient(135deg, var(--rose) 0%, #ff6e8e 35%, var(--gold) 100%);
      background-size:200% 200%; animation:gradMove 8s ease infinite;
    }
    .btn--outlined{color:#fff; border-color:rgba(255,255,255,.35); background:transparent}
    .btn:hover{transform:translateY(-2px); filter:brightness(1.05)}
    .btn:active{transform:translateY(0)}
    @keyframes gradMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .btn span.ripple{position:absolute; border-radius:50%; transform:scale(0); background:rgba(255,255,255,.6); animation:ripple 600ms linear; pointer-events:none}
    @keyframes ripple{to{transform:scale(4); opacity:0}}

    /* Section theming */
    section{scroll-margin-top: calc(var(--header-h) + 16px)}
    .section{padding:96px 0; position:relative}
    .section[data-theme]{--acc1: var(--rose); --acc2: var(--gold); --acc3: var(--violet)}
    .section[data-theme="rose-gold"] {--acc1:var(--rose);   --acc2:var(--gold);  --acc3:var(--violet)}
    .section[data-theme="violet-cyan"]{--acc1:var(--violet);--acc2:var(--cyan);  --acc3:var(--rose)}
    .section[data-theme="gold-amber"] {--acc1:var(--gold);  --acc2:var(--amber); --acc3:var(--rose)}
    .section[data-theme="rose-violet"]{--acc1:var(--rose);  --acc2:var(--violet);--acc3:var(--gold)}
    .section[data-theme="cyan-violet"]{--acc1:var(--cyan);  --acc2:var(--violet);--acc3:var(--rose)}
    .section[data-theme="gold-rose"]  {--acc1:var(--gold);  --acc2:var(--rose);  --acc3:var(--violet)}

    /* Distinct colored backgrounds per section + animated stripes on reveal */
    .section.themed::before{
      content:""; position:absolute; inset:-20% -10%; z-index:-1; filter: blur(60px); opacity:.55;
      background: conic-gradient(from 180deg at 30% 40%, color-mix(in oklab, var(--acc1) 60%, transparent), color-mix(in oklab, var(--acc2) 55%, transparent), color-mix(in oklab, var(--acc3) 50%, transparent), transparent);
      animation: spin 28s linear infinite;
    }
    .section.themed::after{
      content:""; position:absolute; left:-30vw; right:-30vw; top:0; height:2px; opacity:.7;
      background: linear-gradient(90deg, var(--acc1), var(--acc2), var(--acc3));
      transform: translateX(-30vw);
      transition: transform 1s ease .2s;
    }
    .section.in::after{transform: translateX(30vw)}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Section titles centered, bigger, with luxe underline */
    .section h2{
      text-align:center;
      font: 700 clamp(34px, 5vw, 64px) "Playfair Display", serif; margin:0 0 20px;
      background: linear-gradient(120deg, #fff 0%, #fff 40%, var(--acc1) 60%, var(--acc2) 80%); -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .section h2::after{
      content:""; display:block; width:min(220px, 40%); height:4px; margin:14px auto 0; border-radius:999px;
      background: linear-gradient(90deg, var(--acc1), var(--acc2)); box-shadow:0 6px 16px color-mix(in oklab, var(--acc2) 40%, transparent);
      transform: scaleX(.6); opacity:.85; transition: transform .8s ease; 
    }
    .section.in h2::after{transform:scaleX(1)}

    .sub{color:var(--muted); margin:0 auto 26px; width:min(800px, 92%); text-align:center; font-size:18.5px}

    /* Hero */
    .hero{padding: clamp(88px, 12vw, 150px) 0 100px; overflow:hidden; border-bottom:1px solid var(--border)}
    .hero__wrap{display:grid; grid-template-columns: 1.05fr .95fr; align-items:center; gap:34px}
    .hero__text p{margin:0 0 26px; color:var(--muted); font-size:19px}
    /* Hero carousel */
    .hero-carousel{
      position:relative; border-radius: var(--radius); overflow:hidden; box-shadow:var(--shadow);
      border:1px solid var(--border); background:#000; aspect-ratio: 16/10;
    }
    .hero-carousel .track{display:flex; width:100%; height:100%; transition: transform .9s cubic-bezier(.2,.8,.2,1)}
    .hero-carousel .slide{min-width:100%; height:100%}
    .hero-carousel img{width:100%; height:100%; object-fit:cover; display:block; filter:saturate(1.1) contrast(1.05)}
    .hero-carousel .nav{
      position:absolute; inset:auto 12px 12px auto; display:flex; gap:8px; z-index:2;
      background: rgba(0,0,0,.25); padding:6px 8px; border-radius:999px; border:1px solid var(--border); backdrop-filter: blur(6px);
    }
    .hero-carousel .dot{
      width:10px; height:10px; border-radius:50%;
      background:rgba(255,255,255,.5); box-shadow:0 0 0 1px rgba(255,255,255,.35) inset;
      transition:transform .2s, background .2s;
    }
    .hero-carousel .dot.active{background: linear-gradient(135deg, var(--acc1), var(--acc2)); transform:scale(1.25)}

    /* Cards / grids */
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:30px}
    .card{padding:26px; border-radius:18px; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border:1px solid var(--border); box-shadow:var(--shadow); position:relative; overflow:hidden}
    .card::before{
      content:""; position:absolute; inset:-1px; border-radius:inherit; z-index:0;
      background: conic-gradient(from 0deg at 50% 50%, color-mix(in oklab, var(--acc1) 65%, transparent), color-mix(in oklab, var(--acc2) 55%, transparent), color-mix(in oklab, var(--acc3) 50%, transparent), transparent);
      filter: blur(12px); opacity:.25; pointer-events:none;
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor; mask-composite: exclude; padding:1px;
    }
    .card h3{margin:0 0 12px; font-size:22px}
    .list{margin:0; padding-left:20px}
    .features{display:grid; gap:10px; padding-left:20px}
    .tilt{transform-style:preserve-3d; perspective:1000px; will-change:transform; transition:transform .12s ease}

    /* Video */
    .video-grid{display:grid; grid-template-columns:1fr 1fr; gap:24px}
    .video{border-radius:18px; overflow:hidden; border:1px solid var(--border); background:#000; box-shadow:var(--shadow)}
    video{width:100%; height:auto; display:block; outline:none}

    /* Gallery larger */
    .gallery{display:grid; grid-template-columns:repeat(2, 1fr); gap:18px}
    @media(min-width:1100px){ .gallery{grid-template-columns:repeat(3, 1fr)} }
    .gallery img{
      width:100%; height:420px; object-fit:cover; border-radius:16px; border:1px solid var(--border);
      transform:translateZ(0); transition: transform .35s ease, box-shadow .35s ease, filter .35s ease;
      filter:saturate(1.12) contrast(1.06);
      box-shadow: 0 14px 30px rgba(0,0,0,.35);
      cursor:zoom-in;
    }
    .gallery img:hover{transform:scale(1.035); box-shadow:0 22px 46px rgba(0,0,0,.5)}

    /* Lightbox with Zoom */
    .lightbox{position:fixed; inset:0; background:rgba(6,3,10,.92); display:none; align-items:center; justify-content:center; z-index:100}
    .lightbox.show{display:flex}
    .lb-stage{position:relative; max-width:94vw; max-height:88vh; overflow:hidden; border-radius:16px; border:1px solid var(--border); box-shadow:var(--shadow)}
    .lightbox img{display:block; transform-origin:center; user-select:none; -webkit-user-drag:none}
    .lightbox .ui{position:absolute; inset:auto 0 0 0; display:flex; justify-content:center; gap:10px; padding:10px}
    .lightbox .btn{padding:10px 12px}
    .lb-close, .lb-prev, .lb-next{
      position:absolute; top:18px; width:44px; height:44px; display:grid; place-items:center;
      background:var(--glass); border:1px solid var(--border); color:#fff; border-radius:50%; cursor:pointer; box-shadow:var(--shadow)
    }
    .lb-close{right:18px}
    .lb-prev{left:18px; top:calc(50% - 22px)}
    .lb-next{right:18px; top:calc(50% - 22px)}

    /* Contacts / Footer */
    .contacts p{margin:.35em 0; font-size:18.5px}
    .contacts a{color:#fff; text-decoration:none; border-bottom:1px dashed rgba(255,255,255,.4)}
    .contacts a:hover{color:var(--gold); border-color:transparent}
    .footer{padding:30px 0; border-top:1px solid var(--border); color:var(--muted); background:rgba(0,0,0,.18)}
    .footer__wrap{display:flex; justify-content:space-between; align-items:center}
    .small{font-size:13px; opacity:.85}

    /* Reveal effects */
    .reveal{opacity:0; transform: translateY(18px); transition: all .85s cubic-bezier(.2,.8,.2,1)}
    .reveal.in{opacity:1; transform:none}

    /* To top */
    .to-top{position:fixed; right:18px; bottom:18px; z-index:20; opacity:0; pointer-events:none; transition:opacity .3s ease}
    .to-top.show{opacity:1; pointer-events:auto}

    /* Responsive */
    @media (max-width: 1000px){
      .hero__wrap{grid-template-columns:1fr}
      .hero-carousel{order:-1}
    }
    @media (max-width: 900px){
      .nav{display:none}
      .burger{display:block}
      body.menu-open .nav{
        display:flex; position:fixed; inset:var(--header-h) 0 auto 0; padding:14px; z-index:60;
        background: rgba(16,7,24,.98); border-bottom:1px solid var(--border); box-shadow:var(--shadow);
        flex-direction:column; gap:8px
      }
      .grid-2{grid-template-columns:1fr}
      .video-grid{grid-template-columns:1fr}
      .gallery{grid-template-columns:1fr}
      .gallery img{height:360px}
    }
    @media (prefers-reduced-motion: reduce){
      *{animation: none !important; transition:none !important}
      html{scroll-behavior:auto}
    }
  </style>
</head>
<body>
  <div class="progress" id="progress"></div>
  <div class="aura" id="aura"></div>
  <div class="cursor-dot" id="cDot"></div>
  <div class="cursor-ring" id="cRing"></div>

  <header class="header">
    <div class="container header__wrap">
      <div class="logo">Gypsy Show</div>
      <nav class="nav">
        <a href="#about">О нас</a>
        <a href="#program">Программа</a>
        <a href="#video">Видео</a>
        <a href="#gallery">Галерея</a>
        <a href="#contacts" class="btn btn--outlined">Контакты</a>
      </nav>
      <button class="burger" aria-label="Меню" onclick="document.body.classList.toggle('menu-open')">☰</button>
    </div>
  </header>

  <!-- HERO -->
  <section class="section themed hero" id="top" data-theme="rose-gold">
    <div class="container hero__wrap">
      <div class="hero__text reveal">
        <h1 style="text-align:center; margin-bottom:10px;">Цыганский ансамбль</h1>
        <p style="text-align:center;">Песни, танцы и энергия сцены. Живой звук. 4 солиста. Яркое шоу для любых площадок.</p>
        <div style="text-align:center;"><a href="#contacts" class="btn btn--primary">Забронировать дату</a></div>
      </div>

      <!-- Карусель с фотографиями из папки img -->
      <div class="hero-carousel reveal tilt" data-tilt id="heroCarousel" aria-label="Фото карусель">
        <div class="track">
          <div class="slide"><img src="img/photo_01.jpg" alt="Gypsy Show 1"></div>
          <div class="slide"><img src="img/photo_02.jpg" alt="Gypsy Show 2"></div>
          <div class="slide"><img src="img/photo_03.jpg" alt="Gypsy Show 3"></div>
          <div class="slide"><img src="img/photo_04.jpg" alt="Gypsy Show 4"></div>
          <div class="slide"><img src="img/photo_05.jpg" alt="Gypsy Show 5"></div>
          <div class="slide"><img src="img/photo_06.jpg" alt="Gypsy Show 6"></div>
        </div>
        <div class="nav" aria-hidden="true">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="section themed" data-theme="violet-cyan">
    <div class="container">
      <h2>О нас</h2>
      <p class="sub">Мы выходим к гостям с чаркой под песню «Пей до дна», танцами и яркими интерактивами. Работаем с каждым гостем. Камерные вечера и большие сцены — одинаково уверенно.</p>
      <ul class="features reveal">
        <li>Живой вокал и танцы</li>
        <li>Всеми любимые цыганские песни</li>
        <li>Интерактив с залом</li>
      </ul>
    </div>
  </section>

  <!-- PROGRAM -->
  <section id="program" class="section themed" data-theme="gold-amber">
    <div class="container">
      <h2>Программа</h2>
      <div class="grid-2">
        <div class="card reveal tilt" data-tilt>
          <h3>Состав программы</h3>
          <ul class="list">
            <li>«Величальная»</li>
            <li>«Мохнатый шмель», «Дорогой длинною», «Гитара мается» и другие</li>
            <li>Танцевальные выходы, чечётки</li>
            <li>Предсказания, хоровод, фотофинал</li>
          </ul>
        </div>
        <div class="card reveal tilt" data-tilt>
          <h3>Что мы предлагаем</h3>
          <ul class="list">
            <li>Встреча с чаркой, как в фильме «Жестокий романс»</li>
            <li>Живое исполнение цыганских хитов</li>
            <li>Лёгкие интерактивы и гадание</li>
            <li>Множество программ и 3 вида костюмов</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- VIDEO -->
  <section id="video" class="section themed" data-theme="rose-violet">
    <div class="container">
      <h2>Видео</h2>
      <div class="video-grid">
        <div class="video reveal tilt" data-tilt>
          <video controls preload="metadata" poster="img/photo_01.jpg">
            <source src="video/clip1.mp4" type="video/mp4">
            Ваш браузер не поддерживает тег video.
          </video>
        </div>
        <div class="video reveal tilt" data-tilt>
          <video controls preload="metadata" poster="img/photo_02.jpg">
            <source src="video/clip2.mp4" type="video/mp4">
            Ваш браузер не поддерживает тег video.
          </video>
        </div>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="gallery" class="section themed" data-theme="cyan-violet">
    <div class="container">
      <h2>Галерея</h2>
      <div class="gallery">
        <img class="reveal" src="img/photo_01.jpg" alt="GypsyShow 1" loading="lazy" />
        <img class="reveal" src="img/photo_02.jpg" alt="GypsyShow 2" loading="lazy" />
        <img class="reveal" src="img/photo_03.jpg" alt="GypsyShow 3" loading="lazy" />
        <img class="reveal" src="img/photo_04.jpg" alt="GypsyShow 4" loading="lazy" />
        <img class="reveal" src="img/photo_05.jpg" alt="GypsyShow 5" loading="lazy" />
        <img class="reveal" src="img/photo_06.jpg" alt="GypsyShow 6" loading="lazy" />
      </div>
    </div>
  </section>

  <!-- CONTACTS -->
  <section id="contacts" class="section themed" data-theme="gold-rose">
    <div class="container">
      <h2>Контакты и бронирование</h2>
      <div class="contacts reveal" style="text-align:center;">
        <p>Телефон: <a href="tel:+79282589678">+7 (928) 258‑96‑78</a></p>
        <p>Телефон: <a href="tel:+79284072037">+7 (928) 407‑20‑37</a></p>
        <p>Instagram: <a href="https://instagram.com/tsigane_na_prazdnik" target="_blank" rel="noopener">tsigane_na_prazdnik</a></p>
        <p>ВКонтакте: <a href="https://vk.com/tsigane_na_prazdnik" target="_blank" rel="noopener">vk.com/tsigane_na_prazdnik</a></p>
        <div style="margin-top:18px">
          <a href="#about" class="btn btn--primary">Посмотреть программу</a>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container footer__wrap">
      <div>© gypsy-show.ru</div>
      <div class="small">Сделано с любовью к музыке</div>
    </div>
  </footer>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lb-close" aria-label="Закрыть" title="Закрыть">✕</button>
    <button class="lb-prev" aria-label="Назад" title="Назад">‹</button>
    <div class="lb-stage"><img id="lbImg" src="" alt="Просмотр изображения"></div>
    <button class="lb-next" aria-label="Вперёд" title="Вперёд">›</button>
    <div class="ui">
      <a class="btn btn--outlined" id="lbZoomOut">−</a>
      <a class="btn btn--outlined" id="lbZoomReset">100%</a>
      <a class="btn btn--outlined" id="lbZoomIn">+</a>
    </div>
  </div>

  <!-- To top -->
  <div class="to-top" id="toTop"><a class="btn btn--outlined" href="#top" onclick="window.scrollTo({top:0, behavior:'smooth'})">▲</a></div>

  <script>
    const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // Progress bar + toTop visibility + section stripe animation
    const progress = document.getElementById('progress');
    const sections = document.querySelectorAll('.section');
    const onScroll = () => {
      const y = window.scrollY || document.documentElement.scrollTop;
      const h = document.documentElement.scrollHeight - window.innerHeight;
      progress.style.width = (y / h * 100) + '%';
      document.getElementById('toTop').classList.toggle('show', y > 600);
    };
    onScroll(); window.addEventListener('scroll', onScroll);

    // Ripple for buttons
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.btn');
      if (!btn) return;
      const old = btn.querySelector('.ripple'); if (old) old.remove();
      const rect = btn.getBoundingClientRect();
      const d = Math.max(btn.clientWidth, btn.clientHeight);
      const x = e.clientX - rect.left - d/2; const y = e.clientY - rect.top - d/2;
      const s = document.createElement('span'); s.className='ripple';
      s.style.width = s.style.height = d + 'px'; s.style.left = x + 'px'; s.style.top = y + 'px';
      btn.appendChild(s); setTimeout(()=>s.remove(), 650);
    });

    // Reveal on scroll + add 'in' to sections for stripe animation
    const io = new IntersectionObserver((entries)=>{
      entries.forEach((en)=>{
        if (en.isIntersecting){
          en.target.classList.add('in');
          if (en.target.querySelectorAll) {
            en.target.querySelectorAll('.reveal').forEach(el=>el.classList.add('in'));
          }
          io.unobserve(en.target);
        }
      });
    }, {rootMargin:'0px 0px -12% 0px', threshold:.18});
    sections.forEach(sec=>io.observe(sec));

    // Custom cursor + aura following mouse
    const cDot = document.getElementById('cDot');
    const cRing = document.getElementById('cRing');
    let cx = innerWidth/2, cy = innerHeight/2, tx = cx, ty = cy;
    function raf(){
      cx += (tx - cx) * 0.18; cy += (ty - cy) * 0.18;
      cRing.style.transform = `translate(${cx}px, ${cy}px) translate(-50%,-50%)`;
      cDot.style.transform  = `translate(${tx}px, ${ty}px) translate(-50%,-50%)`;
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);
    window.addEventListener('mousemove', (e)=>{
      tx = e.clientX; ty = e.clientY;
      document.documentElement.style.setProperty('--mx', e.clientX + 'px');
      document.documentElement.style.setProperty('--my', e.clientY + 'px');
    }, {passive:true});
    ['mousedown','mouseleave','blur'].forEach(ev=>window.addEventListener(ev, ()=>document.body.classList.add('cursor-hide')));
    ['mouseup','mouseenter','focus'].forEach(ev=>window.addEventListener(ev, ()=>document.body.classList.remove('cursor-hide')));
    document.querySelectorAll('a, button, .btn, .gallery img').forEach(el=>{
      el.addEventListener('mouseenter', ()=> cRing.style.transform += ' scale(1.15)');
      el.addEventListener('mouseleave', ()=> cRing.style.transform = cRing.style.transform.replace(' scale(1.15)',''));
    });

    // Parallax tilt for [data-tilt]
    if (!reduced){
      document.querySelectorAll('[data-tilt]').forEach(el=>{
        el.addEventListener('mousemove', (e)=>{
          const r = el.getBoundingClientRect();
          const x = e.clientX - r.left; const y = e.clientY - r.top;
          const rx = ((y / r.height) - .5) * -8;
          const ry = ((x / r.width) - .5) * 8;
          el.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg)`;
        });
        el.addEventListener('mouseleave', ()=> el.style.transform='perspective(900px) rotateX(0) rotateY(0)');
      });
    }

    // HERO CAROUSEL (slides every 3s, pause on hover, swipe on touch)
    (function(){
      const root = document.getElementById('heroCarousel');
      if (!root) return;
      const track = root.querySelector('.track');
      const slides = [...root.querySelectorAll('.slide')];
      const dots = [...root.querySelectorAll('.dot')];
      let i = 0, N = slides.length, timer;

      function go(n, instant=false){
        i = (n + N) % N;
        track.style.transition = instant ? 'none' : 'transform .9s cubic-bezier(.2,.8,.2,1)';
        track.style.transform = `translateX(-${i*100}%)`;
        dots.forEach((d,k)=>d.classList.toggle('active', k===i));
      }
      function play(){ stop(); timer = setInterval(()=>go(i+1), 3000); }
      function stop(){ if (timer) clearInterval(timer); }

      dots.forEach((d,k)=> d.addEventListener('click', ()=>{ go(k); play(); }));

      let startX=0, dx=0, touching=false;
      root.addEventListener('pointerdown', (e)=>{ touching=true; startX=e.clientX; dx=0; stop(); root.setPointerCapture(e.pointerId); });
      root.addEventListener('pointermove', (e)=>{ if(!touching) return; dx = e.clientX - startX; track.style.transition='none'; track.style.transform=`translateX(calc(-${i*100}% + ${dx}px))`; });
      root.addEventListener('pointerup', (e)=>{ if(!touching) return; touching=false; root.releasePointerCapture(e.pointerId);
        if (dx > 80) go(i-1); else if (dx < -80) go(i+1); else go(i);
        play();
      });
      root.addEventListener('mouseenter', stop);
      root.addEventListener('mouseleave', play);
      go(0, true); play();
    })();

    // Lightbox with Zoom/Pan
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const imgs = [...document.querySelectorAll('.gallery img')];
    let idx = 0, scale = 1, pos = {x:0,y:0}, dragging=false, start={x:0,y:0};
    function openLb(i){ idx=i; load(); lb.classList.add('show'); document.body.style.overflow='hidden'; resetZoom(); }
    function closeLb(){ lb.classList.remove('show'); document.body.style.overflow=''; }
    function load(){ lbImg.src = imgs[idx].src; }
    function resetZoom(){ scale = 1; pos.x=0; pos.y=0; applyTransform(); }
    function applyTransform(){ lbImg.style.transform = `translate(${pos.x}px, ${pos.y}px) scale(${scale})`; }
    function clamp(val, min, max){ return Math.max(min, Math.min(max, val)); }
    imgs.forEach((img,i)=> img.addEventListener('click', ()=>openLb(i)));
    lb.querySelector('.lb-close').addEventListener('click', closeLb);
    lb.querySelector('.lb-prev').addEventListener('click', ()=>{ idx=(idx-1+imgs.length)%imgs.length; load(); resetZoom(); });
    lb.querySelector('.lb-next').addEventListener('click', ()=>{ idx=(idx+1)%imgs.length; load(); resetZoom(); });
    lb.addEventListener('click', (e)=>{ if (e.target===lb) closeLb(); });
    document.addEventListener('keydown', (e)=>{ if (!lb.classList.contains('show')) return;
      if (e.key==='Escape') closeLb();
      if (e.key==='ArrowRight') lb.querySelector('.lb-next').click();
      if (e.key==='ArrowLeft') lb.querySelector('.lb-prev').click();
    });
    document.getElementById('lbZoomIn').addEventListener('click', ()=>{ scale = clamp(scale+0.25, 1, 4); applyTransform(); });
    document.getElementById('lbZoomOut').addEventListener('click', ()=>{ scale = clamp(scale-0.25, 1, 4); if(scale===1){pos.x=pos.y=0} applyTransform(); });
    document.getElementById('lbZoomReset').addEventListener('click', ()=>{ resetZoom(); });
    lb.addEventListener('wheel', (e)=>{
      if (!lb.classList.contains('show')) return;
      e.preventDefault();
      const delta = -Math.sign(e.deltaY) * 0.2;
      const old = scale; scale = clamp(scale + delta, 1, 4);
      const rect = lbImg.getBoundingClientRect();
      const cx = e.clientX - rect.left - rect.width /2;
      const cy = e.clientY - rect.top  - rect.height/2;
      pos.x -= cx * (scale/old - 1);
      pos.y -= cy * (scale/old - 1);
      applyTransform();
    }, {passive:false});
    lbImg.addEventListener('mousedown', (e)=>{ if (scale<=1) return; dragging=true; start.x=e.clientX-pos.x; start.y=e.clientY-pos.y; e.preventDefault(); });
    window.addEventListener('mousemove', (e)=>{ if (!dragging) return; pos.x=e.clientX-start.x; pos.y=e.clientY-start.y; applyTransform(); });
    window.addEventListener('mouseup', ()=> dragging=false);
    lbImg.addEventListener('touchstart', (e)=>{ if (scale<=1) return; dragging=true; const t=e.touches[0]; start.x=t.clientX-pos.x; start.y=t.clientY-pos.y; }, {passive:true});
    lbImg.addEventListener('touchmove', (e)=>{ if (!dragging) return; const t=e.touches[0]; pos.x=t.clientX-start.x; pos.y=t.clientY-start.y; applyTransform(); }, {passive:true});
    lbImg.addEventListener('touchend', ()=> dragging=false);

    // Close mobile menu on link click / outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.header') && document.body.classList.contains('menu-open')) {
        document.body.classList.remove('menu-open');
      }
      if (e.target.matches('.nav a')) document.body.classList.remove('menu-open');
    });
  </script>
</body>
</html>
